<!DOCTYPE html>
<html>
<head>

	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <link rel="icon" href="{{ url_for('static', filename='images/favicon.png') }}" type="image/x-icon" />

	<title>Bussiness card</title>


	<style type="text/css">
		

	h5{
		color:limegreen;
	}



	body {
		background-color: #000;
	 
	  	
	  	
	}

	.img{
		border: 2px solid #444;
	}
	


	</style>
</head>
<body>
	<div class="container">
		<h5>You can download your image here</h5>
		<hr style="border: 2px solid white">
		<div class="flex-sm-column flex-sm-row">
			<div class="d-flex justify-content-center ">
				<!-- filename='im/images/result/'+ out it's the path + the variable passed on the teplate is's returned  -->
				<img class="img" src="{{ url_for('static', filename='im/images/result/'+ out) }}">
				
			</div>
			
		

		</div>
		<br>
		<!-- align the next row to center -->
		<div class="row">
    		<div class="col text-center">
    			
    			<!-- a link that makes download possible -->
    			<a class="btn btn-success"  data-href="{{ url_for('static',filename='im/images/result/'+out) }}" download="{{ out }}" onclick='forceDownload(this)'>Download Image</a>
      			
    		</div>
  		</div>

			
	</div>

</body>
<!-- for downloading image -->
<script type="text/javascript">
	function forceDownload(link){
    var url = link.getAttribute("data-href");
    var fileName = link.getAttribute("download");
    link.innerText = "Working...";
    var xhr = new XMLHttpRequest();
    xhr.open("GET", url, true);
    xhr.responseType = "blob";
    xhr.onload = function(){
        var urlCreator = window.URL || window.webkitURL;
        var imageUrl = urlCreator.createObjectURL(this.response);
        var tag = document.createElement('a');
        tag.href = imageUrl;
        tag.download = fileName;
        document.body.appendChild(tag);
        tag.click();
        document.body.removeChild(tag);
        link.innerText="Download Image";
    }
    xhr.send();
}
</script>

</html>